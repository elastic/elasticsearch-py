// This file is autogenerated, DO NOT EDIT
// esql/esql-async-query-api.asciidoc:17

[source, python]
----
resp = client.perform_request(
    "POST",
    "/_query/async",
    headers={"Content-Type": "application/json"},
    body={
        "query": "\n    FROM library\n    | EVAL year = DATE_TRUNC(1 YEARS, release_date)\n    | STATS MAX(page_count) BY year\n    | SORT year\n    | LIMIT 5\n  ",
        "wait_for_completion_timeout": "2s"
    },
)
print(resp)
----
