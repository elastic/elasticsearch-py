// This file is autogenerated, DO NOT EDIT
// how-to/use-elasticsearch-for-time-series-data.asciidoc:158

[source, python]
----
resp = client.async_search.submit(
    index="my-data-stream",
    runtime_mappings={
        "source.ip": {
            "type": "ip",
            "script": "\n        String sourceip=grok('%{IPORHOST:sourceip} .*').extract(doc[ \"message\" ].value)?.sourceip;\n        if (sourceip != null) emit(sourceip);\n      "
        }
    },
    query={
        "bool": {
            "filter": [
                {
                    "range": {
                        "@timestamp": {
                            "gte": "now-2y/d",
                            "lt": "now/d"
                        }
                    }
                },
                {
                    "range": {
                        "source.ip": {
                            "gte": "192.0.2.0",
                            "lte": "192.0.2.255"
                        }
                    }
                }
            ]
        }
    },
    fields=[
        "*"
    ],
    source=False,
    sort=[
        {
            "@timestamp": "desc"
        },
        {
            "source.ip": "desc"
        }
    ],
)
print(resp)
----
