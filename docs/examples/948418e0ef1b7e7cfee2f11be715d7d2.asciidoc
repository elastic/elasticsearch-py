// This file is autogenerated, DO NOT EDIT
// search/search-your-data/retrievers-examples.asciidoc:465

[source, python]
----
resp = client.indices.create(
    index="retrievers_example_nested",
    settings={
        "number_of_shards": 1
    },
    mappings={
        "properties": {
            "nested_field": {
                "type": "nested",
                "properties": {
                    "paragraph_id": {
                        "type": "keyword"
                    },
                    "nested_vector": {
                        "type": "dense_vector",
                        "dims": 3,
                        "similarity": "l2_norm",
                        "index": True,
                        "index_options": {
                            "type": "flat"
                        }
                    }
                }
            },
            "topic": {
                "type": "keyword"
            }
        }
    },
)
print(resp)

resp1 = client.index(
    index="retrievers_example_nested",
    id="1",
    document={
        "nested_field": [
            {
                "paragraph_id": "1a",
                "nested_vector": [
                    -1.12,
                    -0.59,
                    0.78
                ]
            },
            {
                "paragraph_id": "1b",
                "nested_vector": [
                    -0.12,
                    1.56,
                    0.42
                ]
            },
            {
                "paragraph_id": "1c",
                "nested_vector": [
                    1,
                    -1,
                    0
                ]
            }
        ],
        "topic": [
            "ai"
        ]
    },
)
print(resp1)

resp2 = client.index(
    index="retrievers_example_nested",
    id="2",
    document={
        "nested_field": [
            {
                "paragraph_id": "2a",
                "nested_vector": [
                    0.23,
                    1.24,
                    0.65
                ]
            }
        ],
        "topic": [
            "information_retrieval"
        ]
    },
)
print(resp2)

resp3 = client.index(
    index="retrievers_example_nested",
    id="3",
    document={
        "topic": [
            "ai"
        ]
    },
)
print(resp3)

resp4 = client.indices.refresh(
    index="retrievers_example_nested",
)
print(resp4)
----
